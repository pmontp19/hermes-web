---
import { getCollection } from 'astro:content';

// Fetch all services and industries
const services = await getCollection('services');
const industries = await getCollection('industries');

// Sort by order property
const sortedServices = services.sort((a, b) => (a.data.order || 99) - (b.data.order || 99));
const sortedIndustries = industries.sort((a, b) => (a.data.order || 99) - (b.data.order || 99));
---

<section id="services" class="py-20">
  <div class="container mx-auto px-4">
    <div class="text-center mb-16">
      <h2 class="text-3xl md:text-4xl font-bold text-gray-800 mb-4">Our Services & Industries</h2>
      <p class="max-w-2xl mx-auto text-lg text-gray-600">We offer comprehensive translation solutions across various specialties and industries.</p>
    </div>
    
    <div class="grid lg:grid-cols-2 gap-16 max-w-6xl mx-auto">
      <!-- Translation Services -->
      <div>
        <h3 class="text-2xl font-bold text-toast-600 mb-6">Translation Services</h3>
        <div class="grid sm:grid-cols-2 gap-4">
          {sortedServices.map((service) => (
            <a href={`/services/${service.slug}`} class="flex items-start space-x-3 group hover:bg-toast-50 p-2 rounded-lg transition-colors duration-200">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-toast-500 mt-0.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d={service.data.icon} />
              </svg>
              <div>
                <h4 class="font-semibold text-gray-800 group-hover:text-toast-700">{service.data.title.replace(" Services", "")}</h4>
                <p class="text-gray-600 text-sm mt-1">{service.data.shortDescription}</p>
              </div>
            </a>
          ))}
        </div>
      </div>
      
      <!-- Industries Served -->
      <div>
        <h3 class="text-2xl font-bold text-toast-600 mb-6">Industries We Serve</h3>
        <div class="grid sm:grid-cols-2 gap-4">
          {sortedIndustries.map((industry) => (
            <a href={`/industries/${industry.slug}`} class="flex items-start space-x-3 group hover:bg-toast-50 p-2 rounded-lg transition-colors duration-200">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-toast-500 mt-0.5 flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d={industry.data.icon} />
              </svg>
              <div>
                <h4 class="font-semibold text-gray-800 group-hover:text-toast-700">{industry.data.title.replace(" Translation Services", "")}</h4>
                <p class="text-gray-600 text-sm mt-1">{industry.data.shortDescription}</p>
              </div>
            </a>
          ))}
        </div>
      </div>
    </div>
  </div>
</section>